{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Profile</title>
    <link rel="stylesheet" href="{% static 'user_auth/profile.css' %}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
</head>
<body>
    <!-- Header with logo, same structure as search header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="{% static 'images/logo.png' %}" alt="Logo">
            </div>

            <div class="buttons">
                <a href="{% url 'search' %}" class="btn btn2">Search</a>
                <a href="{% url 'logout' %}" class="btn btn1">Log Out</a>
            </div>
        </div>
    </header>

    <!-- Main Profile Section -->
    <main class="main-container">
        <div class="profile-cards">
            <!-- User Info Card -->
            <div class="user_card">
                <h3 id="form-title"><i class="fas fa-user-circle"></i> Profile: {{ user.username }}</h3>
                <div class="profile_container">
                    <p><strong><i class="fas fa-envelope"></i> Email:</strong> {{ user.email }}</p>
                </div>
                <div class="favorites_list">
                    <h4><i class="fas fa-utensils"></i> Your Favorite Restaurants:</h4>
                    <ul id="favorites-list" class="list-unstyled">
                        <!-- JavaScript will populate this with restaurants from localStorage -->
                    </ul>
                </div>
                <a href="{% url 'logout' %}" class="btn btn-danger mt-4">Log Out</a>
            </div>
        </div>
    </div>

    <script>
        // Function to get favorites from localStorage and display them
        function loadFavorites() {
            const favoritesList = document.getElementById('favorites-list');
            const favorites = JSON.parse(localStorage.getItem('favorites')) || [];

            if (favorites.length === 0) {
                favoritesList.innerHTML = '<p>No favorite restaurants yet.</p>';
            } else {
                favoritesList.innerHTML = '';
                favorites.forEach((restaurant) => {
                    const li = document.createElement('li');
                    li.className = 'restaurant_item';
                    li.innerHTML = `<strong>${restaurant.name}</strong><br>
                                    Cuisine: ${restaurant.cuisine}<br>
                                    Location: ${restaurant.location}`;
                    favoritesList.appendChild(li);
                });
            }
        }

        // Call the function on page load
        document.addEventListener('DOMContentLoaded', loadFavorites);
    </script>
</body>
</html>